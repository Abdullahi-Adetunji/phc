<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PHC AI</title>

  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="style.css">
  </head>
<body>
  <div class="container">
    <header>
      <h1>PHC AI</h1>
    </header>

    <!-- LOGIN / ROLE PICKER -->
    <section class="card" id="loginCard">
      <div style="display:flex;align-items:center;justify-content:space-between">
        <div>
          <h3 style="margin:0 0 8px 0">Choose role to begin</h3>
          <small>Select "Patient" to locate nearest facility and notify admin; select "Administrator" to view dashboard and prompts.</small>
        </div>
        <div class="role-select" id="roleButtons">
          <button class="role-btn" data-role="patient">Patient</button>
          <button class="role-btn" data-role="admin">Administrator</button>
        </div>
      </div>
    </section>

    <!-- MAIN APP AREA (hidden until role selected) -->
    <div id="appArea" style="margin-top:12px;display:none">

      <!-- PATIENT PANEL -->
      <div id="patientPanel" style="display:none" class="col">
        <div class="card">
          <h3 style="margin-top:0">Patient â€” Find nearest facility</h3>
          <small class="muted">Use browser geolocation or enter coordinates manually</small>

          <div style="display:flex;gap:8px;margin-top:8px;">
            <button class="btn-primary" id="useGeo">Use my location</button>
            <button class="btn-ghost" id="manualCoordsBtn">Enter coords</button>
          </div>

          <div id="manualCoords" style="display:none;margin-top:8px;">
            <label>Latitude</label>
            <input id="lat" placeholder="e.g. 9.0765" />
            <label>Longitude</label>
            <input id="lng" placeholder="e.g. 7.3986" />
            <div style="height:6px"></div>
            <button class="btn-primary" id="findManual">Find nearest</button>
          </div>

          <div id="patientResult" style="margin-top:12px"></div>

          <div id="prefillForm" style="display:none;margin-top:12px">
            <label>Short pre-diagnosis / reason for visit</label>
            <textarea id="prediagnosis" placeholder="e.g. fever, vomiting..." rows="3"></textarea>
            <div style="display:flex;gap:8px;margin-top:8px;">
              <button id="confirmVisit" class="btn-primary">Notify facility (send)</button>
              <button id="cancelVisit" class="btn-ghost">Cancel</button>
            </div>
          </div>
        </div>
      </div>

      <!-- ADMIN + DASHBOARD -->
      <div id="adminPanel" style="display:none" class="two-col">
        <!-- LEFT: Dashboard content -->
        <div class="col">
          <div class="card">
            <div style="display:flex;align-items:center;justify-content:space-between">
              <div>
                <h3 style="margin:0">Welcome Dashboard</h3>
                <small class="muted">Type a prompt to update visuals (e.g. "malaria this season, top facilities")</small>
              </div>

              <div style="display:flex;gap:8px;align-items:center">
                <input id="promptInput" placeholder="Type prompt and press Enter" style="width:320px"/>
                <button id="promptBtn" class="btn-primary">Run</button>
              </div>
            </div>

            <div style="margin-top:12px">
              <div style="display:flex;gap:12px;margin-bottom:8px">
                <div class="card" style="padding:10px">
                  <small>Patients today</small>
                  <div id="patientsToday" style="font-weight:700;font-size:1.2rem">--</div>
                </div>
                <div class="card" style="padding:10px">
                  <small>Stock-out alerts</small>
                  <div id="stockAlerts" style="font-weight:700;font-size:1.2rem">--</div>
                </div>
                <div class="card" style="padding:10px">
                  <small>Active PHCs</small>
                  <div id="activePhcs" style="font-weight:700;font-size:1.2rem">--</div>
                </div>
              </div>

              <div class="card" style="margin-top:8px">
                <h4 style="margin:0">Main Visualization</h4>
                <canvas id="mainChart" style="max-height:320px"></canvas>
              </div>

              <div style="margin-top:8px" class="card">
                <h4 style="margin:0 0 8px 0">Related Visuals (pick one)</h4>
                <div class="thumbs" id="visualThumbs">
                  <!-- thumbnails generated here -->
                </div>
              </div>
            </div>
          </div>

          <div id="predList" class="card" style="margin-top:12px">
            <h4 style="margin:0 0 8px 0">Incoming Patient Notifications</h4>
            <div id="notificationsList"><small class="muted">No notifications yet</small></div>
          </div>
        </div>

        <!-- RIGHT: Admin quick area -->
        <aside class="col">
          <div class="card">
            <h4 style="margin:0">Quick Actions</h4>
            <div style="margin-top:8px">
              <button id="clearNotifications" class="btn-ghost" style="width:100%">Clear notifications</button>
              <div style="height:8px"></div>
              <button id="loadMockData" class="btn-primary" style="width:100%">Load mock data</button>
            </div>
          </div>

          <div class="card" style="margin-top:12px">
            <h4 style="margin:0">Notes</h4>
            <small class="muted">Quick admin notes</small>
            <textarea id="adminNotes" rows="6" style="margin-top:8px"></textarea>
          </div>

          <div class="card" style="margin-top:12px">
            <h4 style="margin:0">Status</h4>
            <small id="statusMsg" class="muted">Idle</small>
          </div>
        </aside>
      </div>

    </div> <!-- end app area -->

    <div style="height:18px"></div>
    
  </div>
   <script src="script.js"></script>
</body>